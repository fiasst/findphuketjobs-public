var ADD_JOB=function($,e,t,r){var n={};return $((function(){function t(e,t){var r=e.companies||[];if(r.length<1)$("#trigger-add-company").trigger("click",(function(){alert("You need to add your company before you can post a job")}));else{var n=$("#job-company"),a=1===r.length;$(".form-job-step-2").addClass("active"),n.html("").append($("<option>",{value:"",text:"Select..."})),$.each(r,(function(e,r){var o=HELP.stripHTML(r.tradingName);t&&(a=t==o),n.append($("<option>",{value:r.itemId,text:o+" ("+HELP.stripHTML(r.registeredName)+")",selected:a}))}))}}HELP.waitFor(USER,"current",100,(function(){HELP.checkKeyExists(USER,"current.companies")?(console.log(1,USER.current),t(USER.current)):HELP.waitFor(USER.current,"id",100,(function(){console.log(2,USER.current),MAIN.thinking(!0,!1),HELP.sendAJAX({url:"https://hook.us1.make.com/t828p6ci1t9qp2bef0d7or4ydj8ypljp",method:"GET",data:{id:USER.current.id},success:function(e,r){var n=$("#wf-form-Add-Job-Form");MAIN.thinking(!1),USER.updateCurrentUser(e),HELP.checkKeyExists(e,"companies")&&(USER.current.companies=e.companies,HELP.setCookie("MSmember",JSON.stringify({companies:e.companies})),t(USER.current)),MAIN.handleAjaxResponse(e,n)},error:function(e,t,r){MAIN.thinking(!1)}})}))})),n.companyAddedCallback=function(e,r){e=e||{},HELP.checkKeyExists(e,"company")&&(USER.current.companies=USER.current.companies||[],USER.current.companies.push(e.company),HELP.setCookie("MSmember",JSON.stringify({companies:USER.current.companies})),t(USER.current,e.company.tradingName))},$("#trigger-add-company").on("click",(function(t,r){t.preventDefault();var n=[];if(HELP.checkKeyExists(USER,"current.companies")&&(n=USER.current.companies),n.length&&function(e){var t=!1;return e>2&&USER.getMemberPlans("subscription")?t="You can add a maximum of 3 companies to your account. Please contact our team if you need assistance.":e>0&&USER.getMemberPlans("onetime")&&(t="You can add a maximum of 1 companies to your account for your current member plan. Subscribe to a monthly plan to increase this limit."),t&&(alert(t),$("#company-form-wrapper").remove()),!!t}(n.length))return!1;r=r||!1,HELP.waitFor(e.jQuery,"litbox",100,(function(){$.litbox({title:"Add a new company",href:"#company-form-wrapper",inline:!0,returnFocus:!1,trapFocus:!1,overlayClose:!1,escKey:!1,css:{xs:{offsetTop:20,offsetBottom:20,offsetLeft:20,offsetRight:20,maxWidth:900,width:"100%",opacity:.4}},onComplete:r})}))}));r=$("#job-salary"),a=$("#job-salary-type"),o=$("#job-salary-monthly"),c=function(){return $(a).val().toLowerCase()},i=function(){return $.inArray(c(),["per hour","per day","per month","per year"])>-1},calculateSalary=function(){var e=i(),t=$(r).val(),n="";if(e&&t)switch(t<1&&(alert("Salary amount must be a positive number"),$(r).val("").focus()),c()){case"per year":n=t/12;break;case"per month":n=t;break;case"per day":n=20*t;break;case"per hour":n=160*t}o.val(n)},a.on("change",(function(){var e=i();$("#wrapper-salary-amount").toggle(e).find(".suffix").text($(this).find("option:selected").text()),r.attr("required",(function(t,r){return e})),e||r.val(""),calculateSalary()})),r.on("focusout",calculateSalary);var r,a,o,c,i})),n}(jQuery,this,this.document);