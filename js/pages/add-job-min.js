var ADD_JOB=function($,e,t,a){var r={};return $((function(){function t(e,t){var a=e.companies||[];if(a.length<1)$("#trigger-add-company").trigger("click",(function(){alert("You need to add your business before you can post a job")}));else{var r=$("#job-company"),n=1===a.length;$(".form-job-step-2").addClass("active"),a=HELP.sortArrayByObjectValue(a,"state","active"),r.html("").append($("<option>",{value:"",text:"Select..."})),$.each(a,(function(e,a){var o=HELP.stripHTML(a.tradingName);t&&(n=t==o),r.append($("<option>",{value:"disabled"==a.state?"0":a.itemId,text:o+" ("+HELP.stripHTML(a.registeredName)+")",selected:n,disabled:"disabled"==a.state}))}))}}HELP.waitFor(USER,"current.id",100,(function(){MAIN.thinking(!0,!1),HELP.sendAJAX({url:"https://hook.us1.make.com/t828p6ci1t9qp2bef0d7or4ydj8ypljp",method:"GET",data:{id:USER.current.id},callbackSuccess:function(e,a){var r=$("#wf-form-Add-Job-Form");if(MAIN.thinking(!1),USER.updateCurrentUser(e),HELP.checkKeyExists(e,"companies")){var n=e.companies;USER.current.companies=n;var o=USER.checkCompanyLimits(n,!0),i=HELP.filterArrayByObjectValue(n,"state","active");o>0||o<0&&i.length<n.length?USER.updateActiveCompanies(n):(t(USER.current),MAIN.handleAjaxResponse(e,r))}},callbackError:function(e,t,a){MAIN.thinking(!1)}})})),r.companyAddedCallback=function(e,a){e=e||{},HELP.checkKeyExists(e,"company")&&(USER.current.companies=USER.current.companies||[],USER.current.companies.push(e.company),HELP.setCookie("MSmember",JSON.stringify({companies:USER.current.companies})),t(USER.current,e.company.tradingName))},$("#trigger-add-company").on("click",(function(t,a){t.preventDefault();var r=[];if((HELP.checkKeyExists(USER,"current.companies")&&(r=USER.current.companies),r.length)&&USER.checkCompanyLimits(r,!1)>=0)return $("#company-form-wrapper").remove(),MAIN.dialog({message:'<p>You have reached the active businesses limit for your current member plan. <a href="/plans">Upgrade your plan</a> to post jobs for more businesses.</p>',type:"success",mode:"dialog",options:{title:"Business limit reached",actions:[{type:"button",text:"OK",attributes:{class:"button-primary trigger-lbox-close",href:"#"}}]}}),!1;HELP.waitFor(e.jQuery,"litbox",100,(function(){$.litbox({title:"Add a new company",href:"#company-form-wrapper",inline:!0,returnFocus:!1,trapFocus:!1,overlayClose:!1,escKey:!1,css:{xxs:{offset:20,maxWidth:900,width:"100%",opacity:.4},sm:{offset:"5% 20px"}},onComplete:a||!1})}))}));a=$("#job-salary"),n=$("#job-salary-type"),o=$("#job-salary-monthly"),i=function(){return $(n).val().toLowerCase()},c=function(){return $.inArray(i(),["per hour","per day","per month","per year"])>-1},calculateSalary=function(){var e=c(),t=$(a).val(),r="";if(e&&t)switch(t<1&&(alert("Salary amount must be a positive number"),$(a).val("").focus()),i()){case"per year":r=t/12;break;case"per month":r=t;break;case"per day":r=20*t;break;case"per hour":r=160*t}o.val(r)},n.on("change",(function(){var e=c();$("#wrapper-salary-amount").toggle(e).find(".suffix").text($(this).find("option:selected").text()),a.attr("required",(function(t,a){return e})),e||a.val(""),calculateSalary()})),a.on("focusout",calculateSalary);var a,n,o,i,c})),r}(jQuery,this,this.document);