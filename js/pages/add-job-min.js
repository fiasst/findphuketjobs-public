var ADD_JOB=function($,e,t,s){var n={};return $((function(){const e=$("#trigger-add-business");function t(t,s){var n=t.companies||[];if(n.length<1)e.trigger("click",(function(){alert("You need to add your business before you can post a job")}));else{var r=$("#job-company"),i=1===n.length;$(".form-job-step-2").addClass("active"),n=HELP.sortArrayByObjectValue(n,"state","active"),r.html("").append($("<option>",{value:"",text:"Select..."})),$.each(n,(function(e,t){var n=HELP.stripHTML(t.tradingName),a=t.registeredName?` (${HELP.stripHTML(t.registeredName)})`:"";s&&(i=s==n),r.append($("<option>",{value:"disabled"==t.state?"0":t.itemId,text:n+a,selected:i,disabled:"disabled"==t.state}))}))}}HELP.waitFor(USER,"current.id",100,(function(){MAIN.thinking(!0,!1),HELP.sendAJAX({url:"https://hook.us1.make.com/t828p6ci1t9qp2bef0d7or4ydj8ypljp",method:"GET",data:{id:USER.current.id},callbackSuccess:function(e,s){var n=$("#wf-form-Add-Job-Form");if(MAIN.thinking(!1),USER.updateCurrentUser(e),HELP.checkKeyExists(e,"companies")){var r=e.companies;USER.current.companies=r;var i=BUSINESS.checkBusinessLimits(r,!0),a=HELP.filterArrayByObjectValue(r,"state","active");i>0||i<0&&a.length<r.length?BUSINESS.updateActiveBusinesses(r):(t(USER.current),MAIN.handleAjaxResponse(e,n))}},callbackError:function(e,t,s){MAIN.thinking(!1)}})})),n.companyAddedCallback=function(e,s){e=e||{},HELP.checkKeyExists(e,"company")&&(USER.current.companies=USER.current.companies||[],USER.current.companies.push(e.company),HELP.setCookie("MSmember",JSON.stringify({companies:USER.current.companies})),t(USER.current,e.company.tradingName))},e.on("click",(function(e,t){e.preventDefault();var s=[];if((HELP.checkKeyExists(USER,"current.companies")&&(s=USER.current.companies),s.length)&&BUSINESS.checkBusinessLimits(s,!1)>=0)return $("#business-form-wrapper").remove(),MAIN.dialog({message:'<p>You have reached the active businesses limit for your current member plan. <a href="/plans">Upgrade your plan</a> to post jobs for more businesses.</p>',type:"success",mode:"dialog",options:{title:"Business limit reached",actions:[{type:"button",text:"OK",attributes:{class:"button-primary trigger-lbox-close",href:"#"}}]}}),!1;MAIN.openLitbox({title:"Add a new business",href:"#business-form-wrapper",onComplete:t||!1})}))})),n}(jQuery,0,this.document);