USER=function(e,t,r,n){var o={};return o.current=HELP.getCookie("MSmember")||{},HELP.getLocalStorage("fpj_onboarding")&&$LAB.script("//cdn.jsdelivr.net/gh/fiasst/findphuketjobs-public@"+repoVersion+"/js/pages/onboard-min.js"),o.logout=()=>{MAIN.thinking(!0),USER.current=null,HELP.setCookie("MSmember",null),$memberstackDom.logout().then((()=>{setTimeout((function(){t.location.href="/"}),1500)}))},o.launchStripeCustomerPortal=()=>{MAIN.thinking(!0,!1),HELP.waitFor(t,"$memberstackDom",50,(function(){$memberstackDom.launchStripeCustomerPortal()}))},o.updateCurrentUser=function(t){USER.current=USER.current||o.current,e.extend(!0,USER.current,t)},o.getCurrentMember=function(e){if(USER.current=USER.current||o.current,HELP.checkKeyExists(USER,"current.id"))return e?void e(USER.current):USER.current;HELP.waitFor(t,"$memberstackDom",50,(function(){$memberstackDom.getCurrentMember().then((({data:t})=>(t=t||{},o.updateCurrentUser(t),e&&e(USER.current),USER.current)))}))},o.updateCurrentMember=function(e,r){HELP.waitFor(t,"$memberstackDom",50,(function(){$memberstackDom.updateMember({customFields:e}).then((({data:e})=>(e=e||{},o.updateCurrentUser(e),r&&r(USER.current),USER.current)))}))},o.getMemberJSON=function(e){HELP.waitFor(t,"$memberstackDom",50,(function(){$memberstackDom.getMemberJSON().then((({data:t})=>(t=t||{},e&&e(t),t)))}))},o.updateMemberJSON=function(e,r){HELP.waitFor(t,"$memberstackDom",50,(function(){$memberstackDom.updateMemberJSON({json:e}).then((({data:e})=>(e=e||{},r&&r(e),e)))}))},o.getMemberPlans=function(e,t,r){if(t=t||o.getCurrentMember(),HELP.checkKeyExists(t,"planConnections")&&t.planConnections.length){var n=t.planConnections;return r&&(n=HELP.filterArrayByObjectValue(n,"status",["ACTIVE","TRIALING"])),e&&(n=HELP.filterArrayByObjectValue(n,"type",e)),n}return[]},o.getCurrentMember(),o.ghostLogout=function(){e(r).on("click","#trigger-ghost-logout",o.logout)},e((function(){e(r).on("click",".trigger-customer-portal",(function(e){e.preventDefault(),o.launchStripeCustomerPortal()}))})),o}(jQuery,this,this.document);